= form_for @recipe do |f|
  -# = hidden_field_tag :authenticity_token, form_authenticity_token
  .recipe.clearfix
    .recipe-label
      = f.label :name
      %span.required 必須
    .recipe-input
      = f.text_field :name, placeholder: "例) マカロン", class: 'input-recipe'

  .recipe.clearfix
    .recipe-label
      = f.label :genre_id
      %span.require 必須
    .recipe-input
      = f.collection_select :genre_id, Genre.all, :id, :name, prompt: "--", class: "input-recipehash"

  .recipe.clearfix
    .recipe-label
      = f.label :difficulty_id
      %span.require 必須
    .recipe-input
      = f.collection_select :difficulty_id, Difficulty.all, :id, :name, prompt: "--", class: "input-recipehash"

  .recipe.clearfix
    .recipe-label
      = f.label :servers
      %span.require 必須
    .recipe-input
      = f.text_field :servers, placeholder: "例) 4", class: 'input-recipe'
      人分

  .recipe.clearfix
    .recipe-label
      = f.label :cookingtime
      %span.requere 必須
    .recipe-input
      = f.text_field :cookingtime, placeholder: "例) 1時間40分", class: 'input-recipe'

  .recipe.clearfix
    .recipe-label
      = f.label :restingtime
      %span.requere 必須
    .recipe-input
      = f.text_field :restingtime, placeholder: "例) 一日", class: 'input-recipe'

  .recipe.clearfix
    .recipe-label
      = f.label :bakingtime
      %span.requere 必須
    .recipe-input
      = f.text_field :bakingtime, placeholder: "例) 10分", class: 'input-recipe'

  .recipe.clearfix
    .recipe-label
      = f.label :bakingtemperature
      %span.require 必須
    .recipe-input
      = f.text_field :bakingtemperature, placeholder: "例) 180", class: 'input-recipe'
      ℃

  = f.nested_fields_for :recipe_ingredients do |ff|
    = ff.remove_nested_fields_link '削除', data: { confirm: '本当に削除しますか?' }
    = ff.text_field :ingredients
    = ff.text_field :quantity
    
  = f.add_nested_fields_link :recipe_ingredients, '入力枠の追加'
 
  .recipe.clearfix
    .recipe-label
      = f.label :method
      %span.require 必須
    .recipe-input
      = f.text_area :method, placeholder: '例) 1...2...3...', rows: '8', class: "input-recipebig"

  .recipe.clearfix
    .recipe-label
      = f.label :cookingpoint
      %span.require 必須
    .recipe-input
      = f.text_area :cookingpoint, placeholder: '例) 立てすぎないこと。', rows: '4', class: "input-recipebig"

  .recipe.clearfix
    .recipe-label
      = f.label :instruments
      %span.require 必須
    .recipe-input
      = f.text_area :instruments, placeholder: '例) ホイッパー、ボール、カード、ゴムベラ、鍋、波刃包丁、まな板、バット、天板、ベイキングシート、オーブン など。 特殊なものがあればぜひお書きください。', rows: '8', class: "input-recipebig"

  -# 画像
  .recipe.clearfix
    .recipe-label
      = f.label :image
      %span.require 必須
    .recipe-input{id: "image-box"}
      .recipe-input__previews{id: "previews"}
        - if @recipe.persisted?
          - @recipe.recipe_images.each_with_index do |image, i|
            = image_tag recipe_images.image.url, data: { index: i }, width: "100", height: '100'

      = f.fields_for :recipe_images do |image|
        .js-file_group{"data-index": "#{image.index}"}
          = image.file_field :image, class: "js-file"
          .js-remove 削除
            

        - if @recipe.persisted?
          = image.check_box :_destroy, data:{ index: image.index }, class: 'hidden-destroy'

      - if @recipe.persisted?
        .js-file_group{"data-index": "#{@recipe.recipe_images.count}"}
          = file_field_tag :image, name: "recipe[recipe_images_attributes][#{@recipe.recipe_images.count}][image]", class: 'js-file'
          .js-remove 削除

  -# 動画
  .recipe.clearfix
    .recipe-label
      = f.label :video
      %span.require 任意
    .recipe-input
      = f.fields_for :recipe_videos do |video|
        = video.file_field :video, class: "post-video"

  
  .actions-recipe
    = f.submit "レシピを投稿する", class: 'account-btn', data: {disable_with: '送信...'}

-#  -# 材料分量
-#   .recipe.clearfix
-#     .ingredients-title このお菓子の材料と分量
-#     %span.require 必須
-#     #ingredients
-#       = f.fields_for :recipe_ingredients do |ingredient|
-#         = render 'recipe_ingredient_fields', f: ingredient
-#       .links
-#         = link_to_add_association '入力枠を増やす', f, :recipe_ingredients

  

